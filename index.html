<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <meta name="description" content="ููุตุฉ ูุญุงุฏุซุฉ ุฐููุฉ ูุฏุนููุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู">
    <meta name="theme-color" content="#1f2937">
    <title>NeuroX - ููุตุฉ ุงููุญุงุฏุซุฉ ุงูุฐููุฉ</title>
    <!-- ุฅุถุงูุฉ ุฃููููุฉ ูููููุน -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐ง</text></svg>" type="image/svg+xml">
    <link rel="stylesheet" href="style-enhanced.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- ุฃููุงุท ูุจุงุดุฑุฉ ูุฒุฑ ูุณุฎ ุงูุฑุณุงุฆู ูุถูุงู ุชุทุจูููุง -->
    <style>
        .message.received {
            position: relative;
        }
        .message-copy-btn {
            position: absolute;
            top: 12px;
            left: 12px; /* ุชุบููุฑ ูู right ุฅูู left ูุฌุนู ุงูุฒุฑ ุนูู ูุณุงุฑ ุงูุฑุณุงูุฉ */
            width: 32px;
            height: 32px;
            background-color: #3498db;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.2s ease;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .message.received:hover .message-copy-btn {
            opacity: 1;
            transform: scale(1);
        }
        .message-copy-btn svg {
            width: 16px;
            height: 16px;
            fill: none;
            stroke: white;
            stroke-width: 2;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.2s ease;
        }
        .message-copy-btn .copy-icon {
            opacity: 1;
        }
        .message-copy-btn .check-icon {
            opacity: 0;
        }
        .message-copy-btn.copied .copy-icon {
            opacity: 0;
        }
        .message-copy-btn.copied .check-icon {
            opacity: 1;
            stroke: #4cd964;
        }
        .message-copy-btn.copied {
            background-color: #27ae60;
        }
        body[data-theme="dark"] .message-copy-btn {
            background-color: #2c3e50;
        }
        
        /* Aรฑadir estas reglas para asegurar que el botรณn aparezca en el lado izquierdo */
        html[dir="rtl"] .message-copy-btn {
            right: auto;
            left: 12px !important;
        }
        
        /* Asegurar que el botรณn sea visible */
        .message-copy-btn {
            z-index: 100;
        }

        /* ุชุญุณููุงุช ุฃุฒุฑุงุฑ ุงูุชุจุฏูู ูู ุงูุฅุนุฏุงุฏุงุช */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 46px;
            height: 24px;
            cursor: pointer;
            z-index: 10;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
            position: absolute;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
            z-index: 1;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
            z-index: 2;
        }

        .toggle-switch:hover .toggle-slider {
            box-shadow: 0 0 3px #2196F3;
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: #2196F3;
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }

        /* ุชุฒููู ุนูุฏ ุงูุชุญููู */
        .toggle-slider:after {
            content: "";
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border-radius: 34px;
            background-color: rgba(33, 150, 243, 0);
            transition: background-color 0.3s;
            z-index: 0;
            pointer-events: none;
        }

        .toggle-switch:hover .toggle-slider:after {
            background-color: rgba(33, 150, 243, 0.1);
        }
        
        /* ุฅุถุงูุฉ ููุท ููุถุน ุฒุฑ ุงูุฅุบูุงู ูู ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช ุนูู ุงููุณุงุฑ */
        .close-settings-btn {
            position: absolute;
            left: 15px;
            right: auto;
            top: 15px;
        }

        /* ุชุญุณููุงุช ุฒุฑ ุชุจุฏูู ุงูุณูุฉ (ุงููุถุน ุงููุธูู/ุงููุงุชุญ) */
        .theme-toggle {
            position: relative;
            width: 56px;
            height: 28px;
            border: none;
            background: transparent;
            padding: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            overflow: visible;
        }

        .theme-toggle-track {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, #f7b733, #fc4a1a);
            border-radius: 14px;
            display: flex;
            align-items: center;
            padding: 2px;
            box-shadow: 0 2px 8px rgba(252, 74, 26, 0.3), inset 0 1px 1px rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
        }

        body[data-theme="dark"] .theme-toggle-track {
            background: linear-gradient(to right, #141e30, #243b55);
            box-shadow: 0 2px 8px rgba(20, 30, 48, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }

        .theme-toggle-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 1;
            position: absolute;
            transition: transform 0.5s ease, opacity 0.3s ease;
        }

        .light-icon {
            left: 4px;
            opacity: 1;
            transform: translateY(0) rotate(0);
            text-shadow: 0 0 10px rgba(252, 74, 26, 0.5);
        }

        .dark-icon {
            right: 4px;
            opacity: 0.5;
            transform: translateY(0) rotate(0);
            text-shadow: 0 0 10px rgba(36, 59, 85, 0.5);
        }

        .theme-toggle-ball {
            position: absolute;
            left: 2px;
            width: 24px;
            height: 24px;
            background: #ffffff;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                        background-color 0.5s ease;
            z-index: 2;
        }

        body[data-theme="dark"] .theme-toggle-ball {
            transform: translateX(28px);
            background: #2c3e50;
        }

        body[data-theme="dark"] .light-icon {
            opacity: 0.5;
            transform: translateY(0) rotate(-45deg);
        }

        body[data-theme="dark"] .dark-icon {
            opacity: 1;
            transform: translateY(0) rotate(0);
        }

        .theme-toggle:hover .theme-toggle-track {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .theme-toggle:hover .theme-toggle-ball {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* ุชุฃุซูุฑ ุงูููุงุด ุนูุฏ ุงูููุฑ */
        .theme-toggle:active .theme-toggle-ball {
            transform: scale(0.9);
        }

        body[data-theme="dark"] .theme-toggle:active .theme-toggle-ball {
            transform: scale(0.9) translateX(28px);
        }

        @media (prefers-reduced-motion: reduce) {
            .theme-toggle-ball,
            .theme-toggle-icon {
                transition-duration: 0.1s;
            }
        }
        
        /* ุชุฃุซูุฑ ุงููููุถ ููุนุฒูุฒ ุนูุฏ ุชุบููุฑ ุงูุณูุฉ */
        @keyframes theme-transition-flash {
            0% { opacity: 0; }
            50% { opacity: 0.3; }
            100% { opacity: 0; }
        }
        
        .theme-transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 9999;
            pointer-events: none;
            opacity: 0;
        }
        
        .theme-transition-overlay.flash {
            animation: theme-transition-flash 0.5s ease-out;
        }
        
        body[data-theme="dark"] .theme-transition-overlay {
            background: black;
        }

        /* ุฃููุงุท ุฒุฑ ุงูุชูุฑูุฑ ููุฃุณูู */
        .scroll-indicator {
            position: fixed;
            left: 50%;
            bottom: 80px; /* ููู ููุทูุฉ ุงููุชุงุจุฉ ุจูููู */
            transform: translateX(-50%);
            background-color: var(--primary-color, #007bff);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 950;
            opacity: 0; /* ูุฎูู ุงูุชุฑุงุถูุงู */
            visibility: hidden; /* ูุถูุงู ุนุฏู ุงูุชุฏุงุฎู ุนูุฏูุง ูููู ูุฎููุงู */
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
        }
        
        .scroll-indicator.visible {
            opacity: 0.8; /* ูุฑุฆู ุนูุฏ ุฅุถุงูุฉ ููุงุณ visible */
            visibility: visible;
        }
        
        .scroll-indicator:hover {
            opacity: 1;
            transform: translateX(-50%) scale(1.1);
        }
        
        .scroll-indicator svg {
            width: 20px;
            height: 20px;
        }
        
        /* ุชููู ูุน ูุถุน ุงููุงุชู ุงููุญููู */
        @media (max-width: 768px) {
            .scroll-indicator {
                bottom: 70px;
                width: 36px;
                height: 36px;
            }
        }
        
        /* ุชูุณูู ูุน ุงูุซูู ุงููุงุชุญ */
        body[data-theme="light"] .scroll-indicator {
            background-color: var(--primary-color, #007bff);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
    </style>
    
    <!-- ุชุญููู ุงูููุชุจุงุช ุงูุฎุงุฑุฌูุฉ ุฃููุงู -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/he@1.2.0/he.min.js"></script>
    
    <!-- ุชุญุณูู ุชูููู ูุชุญููู MathJax -->
    <script type="text/javascript">
    window.MathJax = {
        loader: {
            load: ['[tex]/ams', '[tex]/color', '[tex]/html', '[tex]/noerrors', '[tex]/physics', '[tex]/mathtools', '[tex]/mhchem', '[tex]/cancel']
        },
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true,
            processEnvironments: true,
            tags: 'ams',
            macros: {},
            packages: {'[+]': ['ams', 'color', 'html', 'noerrors', 'physics', 'mathtools', 'mhchem', 'cancel']}
        },
        svg: {
            fontCache: 'global'
        },
        options: {
            ignoreHtmlClass: 'tex2jax_ignore',
            processHtmlClass: 'tex2jax_process',
            enableMenu: false,
            renderActions: {
                assistiveMml: [],
                addMenu: []
            }
        },
        startup: {
            ready: function() {
                MathJax.startup.defaultReady();
                console.info('MathJax ุชู ุชุญูููู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู!');
                
                // ุฏุงูุฉ ูุชุญุฏูุซ ุงููุนุงุฏูุงุช ุงูุฑูุงุถูุฉ
                window.renderMath = function(element) {
                    try {
                        if (!element) {
                            MathJax.typesetPromise().then(() => {
                                console.log('ุชู ุชุญุฏูุซ ุฌููุน ุงููุนุงุฏูุงุช ุงูุฑูุงุถูุฉ');
                            }).catch(err => {
                                console.error('ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงููุนุงุฏูุงุช:', err);
                            });
                        } else {
                            MathJax.typesetPromise([element]).then(() => {
                                console.log('ุชู ุชุญุฏูุซ ุงููุนุงุฏูุงุช ูู ุงูุนูุตุฑ ุงููุญุฏุฏ');
                            }).catch(err => {
                                console.error('ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงููุนุงุฏูุงุช:', err);
                            });
                        }
                    } catch (e) {
                        console.error('ุฎุทุฃ ุฃุซูุงุก ูุนุงูุฌุฉ ุงููุนุงุฏูุงุช ุงูุฑูุงุถูุฉ:', e);
                    }
                };
                
                // ูุนุงูุฌุฉ ุงููุนุงุฏูุงุช ุนูุฏ ุชุญููู ุงููุณุชูุฏ
                document.addEventListener('DOMContentLoaded', function() {
                    window.renderMath();
                });
                
                // ุฅูุดุงุก ุญุฏุซ ูุชุญุฏูุซ MathJax ุนูุฏ ุฅุถุงูุฉ ูุญุชูู ุฌุฏูุฏ
                document.dispatchEvent(new Event('mathjax-ready'));
            }
        }
    };
    </script>
    <!-- ุชุญููู MathJax ูุน ุฏุนู ูุงูู ููุตูุบ -->
    <script id="MathJax-script" async 
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" 
            onload="console.log('MathJax ูุญูู');" 
            onerror="console.error('ูุดู ูู ุชุญููู MathJax');">
    </script>
    
    <!-- Import map for Gemini API -->
    <script type="importmap">
    {
        "imports": {
            "@google/generative-ai": "https://esm.run/@google/generative-ai",
            "@google/generative-ai/server": "https://esm.run/@google/generative-ai/server"
        }
    }
    </script>
</head>
<body>
    <!-- ุฅุถุงูุฉ ูุงูุจ ููุตูุฑ ุจููุก ุงูุดุงุดุฉ -->
    <template id="fullscreenImageTemplate">
        <div class="fullscreen-image">
            <img src="" alt="ุตูุฑุฉ ุจููุก ุงูุดุงุดุฉ">
            <button class="fullscreen-close"><i class="fas fa-times"></i></button>
        </div>
    </template>
    
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="#" class="logo">
                    <i class="fas fa-brain"></i>
                    <span>NeuroX</span>
                </a>
                <button class="sidebar-close-btn" id="closeSidebar">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="sidebar-content">
                <button class="new-chat-btn">
                    <i class="fas fa-plus"></i>
                    <span>ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ</span>
                </button>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">ุงููุญุงุฏุซุงุช ุงูุณุงุจูุฉ</h3>
                    <div class="chat-history">
                        <div class="chat-item">
                            <i class="fas fa-comment"></i>
                            <span>ูุญุงุฏุซุฉ ุณุงุจูุฉ 1</span>
                            <button class="delete-chat-btn"><i class="fas fa-trash"></i></button>
                        </div>
                        <div class="chat-item">
                            <i class="fas fa-comment"></i>
                            <span>ูุญุงุฏุซุฉ ุณุงุจูุฉ 2</span>
                            <button class="delete-chat-btn"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="settings-btn">
                    <i class="fas fa-cog"></i>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </button>
                <div class="app-version">v1.0.0</div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- ... ุจุงูู ููุฏ ุงููุญุชูู ุงูุฑุฆูุณู ููุง ูู ... -->
            <header class="main-header">
                <button class="toggle-sidebar" id="toggleSidebar">
                    <i class="fas fa-bars"></i>
                </button>
                <a href="#" class="logo">
                    <i class="fas fa-brain"></i>
                    <span>NeuroX</span>
                </a>
                <div class="header-title">
                    <p>ููุตุฉ ุงููุญุงุฏุซุฉ ุงูุฐููุฉ</p>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle">
                        <div class="theme-toggle-track">
                            <div class="theme-toggle-icon light-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="theme-toggle-icon dark-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div class="theme-toggle-ball"></div>
                        </div>
                    </button>
                </div>
            </header>

            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <!-- Welcome message -->
                    <div class="message received welcome-message">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-sender">NeuroX</span>
                                <span class="message-time">ุงูุขู</span>
                            </div>
                            <div class="content-container">
                                <p>ูุฑุญุจุงู ุจู ูู ููุตุฉ NeuroX ูููุญุงุฏุซุฉ ุงูุฐููุฉ! ููู ูููููู ูุณุงุนุฏุชู ุงููููุ</p>
                                <div class="welcome-suggestions">
                                    <button class="suggestion-btn">ููู ููููู ูุณุงุนุฏุชูุ</button>
                                    <button class="suggestion-btn">ูุง ูู ูุฏุฑุงุชูุ</button>
                                    <button class="suggestion-btn">ุงูุชุจ ูู ููุฏ ุจูุบุฉ Python</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <form id="messageForm">
                        <div id="filePreviewContainer" class="file-preview-container" style="display: none;">
                            <div id="filePreview" class="file-preview"></div>
                            <div class="file-metadata">
                                <span class="file-name">ุงูููู ุงููุฑูู</span>
                            </div>
                            <button type="button" id="removeFile" class="remove-file-btn">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="input-wrapper">
                            <input type="text" id="messageInput" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง...">
                            <div class="input-buttons">
                                <label for="fileUpload" class="upload-btn" title="ุฅุฑูุงู ููู">
                                    <svg class="attachment-icon" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                                    </svg>
                                </label>
                                <input type="file" id="fileUpload" accept="image/*,audio/wav,audio/mp3,audio/aiff,audio/aac,audio/ogg,audio/flac,application/pdf,application/x-javascript,text/javascript,application/x-python,text/x-python,text/plain,text/html,text/css,text/md,text/csv,text/xml,text/rtf" hidden>
                                <button type="submit" title="ุฅุฑุณุงู" class="send-btn">
                                    <svg class="send-icon" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <circle class="send-icon-circle" cx="12" cy="12" r="10" opacity="0"></circle>
                                        <path class="send-icon-path" d="M22 2L11 13"></path>
                                        <path class="send-icon-path" d="M22 2l-7 20-4-9-9-4 20-7z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal Template -->
    <template id="settingsModalTemplate">
        <div class="settings-modal">
            <div class="settings-content">
                <h2><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช</h2>
                
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="general">ุนุงู</button>
                    <button class="settings-tab" data-tab="interface">ูุงุฌูุฉ ุงููุณุชุฎุฏู</button>
                    <button class="settings-tab" data-tab="advanced">ูุชูุฏู</button>
                    <button class="settings-tab" data-tab="privacy">ุงูุฎุตูุตูุฉ</button>
                </div>
                
                <div class="settings-body">
                    <!-- ุนูุงูุฉ ุชุจููุจ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ -->
                    <div class="settings-section active" data-section="general">
                        <div class="settings-group">
                            <h3>ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h3>
                            <div class="settings-item">
                                <label for="autoSaveToggle">
                                    <span class="settings-label">ุญูุธ ุชููุงุฆู ูููุญุงุฏุซุงุช</span>
                                    <span class="settings-description">ุญูุธ ุงููุญุงุฏุซุงุช ุชููุงุฆูุงู ุฃุซูุงุก ุงููุญุงุฏุซุฉ</span>
                                </label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="autoSaveToggle" checked>
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="messageSoundToggle">
                                    <span class="settings-label">ุตูุช ุงูุฅุดุนุงุฑุงุช</span>
                                    <span class="settings-description">ุชุดุบูู ุตูุช ุนูุฏ ุงุณุชูุงู ุฑุณุงุฆู ุฌุฏูุฏุฉ</span>
                                </label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="messageSoundToggle">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="soundVolumeSlider">
                                    <span class="settings-label">ูุณุชูู ุตูุช ุงูุฅุดุนุงุฑุงุช</span>
                                    <span class="settings-description">ุถุจุท ูุณุชูู ุตูุช ุงูุฅุดุนุงุฑ</span>
                                </label>
                                <div class="range-slider">
                                    <input type="range" id="soundVolumeSlider" min="0" max="100" value="70">
                                    <div class="value-display">70%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ุนูุงูุฉ ุชุจููุจ ูุงุฌูุฉ ุงููุณุชุฎุฏู -->
                    <div class="settings-section" data-section="interface">
                        <div class="settings-group">
                            <h3>ูุงุฌูุฉ ุงููุณุชุฎุฏู</h3>
                            <div class="settings-item">
                                <label for="themeSelect">
                                    <span class="settings-label">ุงููุธูุฑ</span>
                                    <span class="settings-description">ุงุฎุชุฑ ูุธูุฑ ุงูุชุทุจูู</span>
                                </label>
                                <div class="select-wrapper">
                                    <select id="themeSelect">
                                        <option value="dark">ุฏุงูู</option>
                                        <option value="light">ูุงุชุญ</option>
                                        <option value="system">ุชููุงุฆู ุญุณุจ ุงููุธุงู</option>
                                    </select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="fontSizeSelect">
                                    <span class="settings-label">ุญุฌู ุงูุฎุท</span>
                                    <span class="settings-description">ุงุฎุชุฑ ุญุฌู ุฎุท ุงููุญุงุฏุซุฉ</span>
                                </label>
                                <div class="select-wrapper">
                                    <select id="fontSizeSelect">
                                        <option value="small">ุตุบูุฑ</option>
                                        <option value="medium">ูุชูุณุท</option>
                                        <option value="large">ูุจูุฑ</option>
                                    </select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="animationsToggle">
                                    <span class="settings-label">ุชุฃุซูุฑุงุช ุญุฑููุฉ</span>
                                    <span class="settings-description">ุชูุนูู ุงูุชุฃุซูุฑุงุช ุงูุญุฑููุฉ ูู ุงูุชุทุจูู</span>
                                </label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="animationsToggle" checked>
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ุนูุงูุฉ ุชุจููุจ ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ -->
                    <div class="settings-section" data-section="advanced">
                        <div class="settings-group">
                            <h3>ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ</h3>
                            <div class="settings-item">
                                <label for="apiUrlInput">
                                    <span class="settings-label">ุฑุงุจุท ุงูู API</span>
                                    <span class="settings-description">ุฑุงุจุท ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจูู</span>
                                </label>
                                <input type="text" id="apiUrlInput" value="/api/chat" class="settings-input">
                            </div>
                            
                            <div class="settings-item">
                                <label for="maxTokensSlider">
                                    <span class="settings-label">ุงูุญุฏ ุงูุฃูุตู ููุฑููุฒ</span>
                                    <span class="settings-description">ุงูุชุญูู ูู ุฃูุตู ุทูู ููุฑุฏ (ุงูุชูููุงุช)</span>
                                </label>
                                <div class="range-slider">
                                    <input type="range" id="maxTokensSlider" min="100" max="4000" value="2000">
                                    <div class="value-display">2000</div>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="temperatureSlider">
                                    <span class="settings-label">ุฏุฑุฌุฉ ุงูุฅุจุฏุงุนูุฉ</span>
                                    <span class="settings-description">ุงูุชุญูู ูู ุชููุน ูุฅุจุฏุงุนูุฉ ุงูุฑุฏูุฏ</span>
                                </label>
                                <div class="range-slider">
                                    <input type="range" id="temperatureSlider" min="0" max="100" value="70">
                                    <div class="value-display">0.7</div>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="modelSelect">
                                    <span class="settings-label">ูููุฐุฌ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                                    <span class="settings-description">ุงุฎุชุฑ ุงููููุฐุฌ ุงููุณุชุฎุฏู ูููุญุงุฏุซุฉ</span>
                                </label>
                                <div class="select-wrapper">
                                    <select id="modelSelect">
                                        <option value="default">ุงููููุฐุฌ ุงูุงูุชุฑุงุถู</option>
                                        <option value="fast">ุงููููุฐุฌ ุงูุณุฑูุน</option>
                                        <option value="creative">ุงููููุฐุฌ ุงูุฅุจุฏุงุนู</option>
                                        <option value="precise">ุงููููุฐุฌ ุงูุฏููู</option>
                                    </select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-group danger-zone">
                            <h3>ููุทูุฉ ุงูุฎุทุฑ</h3>
                            <div class="settings-item">
                                <label for="clearAllChatsBtn">
                                    <span class="settings-label">ุญุฐู ุฌููุน ุงููุญุงุฏุซุงุช</span>
                                    <span class="settings-description">ุญุฐู ุฌููุน ุงููุญุงุฏุซุงุช ุงูุณุงุจูุฉ. ูุฐุง ุงูุฅุฌุฑุงุก ุบูุฑ ูุงุจู ููุชุฑุงุฌุน!</span>
                                </label>
                                <button id="clearAllChatsBtn" class="danger-button">
                                    <i class="fas fa-trash"></i>
                                    ุญุฐู ุฌููุน ุงููุญุงุฏุซุงุช
                                </button>
                            </div>
                            
                            <div class="settings-item">
                                <label for="resetSettingsBtn">
                                    <span class="settings-label">ุฅุนุงุฏุฉ ุชุนููู ุงูุฅุนุฏุงุฏุงุช</span>
                                    <span class="settings-description">ุงุณุชุนุงุฏุฉ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุฅูู ุงูููู ุงูุงูุชุฑุงุถูุฉ</span>
                                </label>
                                <button id="resetSettingsBtn" class="warning-button">
                                    <i class="fas fa-undo"></i>
                                    ุงุณุชุนุงุฏุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ุนูุงูุฉ ุชุจููุจ ุงูุฎุตูุตูุฉ -->
                    <div class="settings-section" data-section="privacy">
                        <div class="settings-group">
                            <h3>ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ</h3>
                            <div class="settings-item">
                                <label for="storeConversationsLocallyToggle">
                                    <span class="settings-label">ุชุฎุฒูู ุงููุญุงุฏุซุงุช ูุญููุงู</span>
                                    <span class="settings-description">ุชุฎุฒูู ุงููุญุงุฏุซุงุช ูู ูุชุตูุญู ุงููุญูู</span>
                                </label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="storeConversationsLocallyToggle" checked>
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="sendAnalyticsToggle">
                                    <span class="settings-label">ุฅุฑุณุงู ุจูุงูุงุช ุงูุงุณุชุฎุฏุงู</span>
                                    <span class="settings-description">ุฅุฑุณุงู ุจูุงูุงุช ูุฌูููุฉ ูุชุญุณูู ุงูุชุทุจูู</span>
                                </label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="sendAnalyticsToggle">
                                    <span class="toggle-slider"></span>
                                </div>
                            </div>
                            
                            <div class="settings-item">
                                <label for="autoDeletePeriodSelect">
                                    <span class="settings-label">ุญุฐู ุงููุญุงุฏุซุงุช ุชููุงุฆูุงู</span>
                                    <span class="settings-description">ุญุฐู ุงููุญุงุฏุซุงุช ุงููุฏููุฉ ุชููุงุฆูุงู ุจุนุฏ ูุชุฑุฉ ูุนููุฉ</span>
                                </label>
                                <div class="select-wrapper">
                                    <select id="autoDeletePeriodSelect">
                                        <option value="never">ุฃุจุฏุงู</option>
                                        <option value="7days">ุจุนุฏ 7 ุฃูุงู</option>
                                        <option value="30days">ุจุนุฏ 30 ููู</option>
                                        <option value="90days">ุจุนุฏ 90 ููู</option>
                                    </select>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button class="cancel-settings-btn">ุฅูุบุงุก</button>
                    <button class="save-settings-btn">ุญูุธ ุงูุชุบููุฑุงุช</button>
                </div>
                
                <button class="close-settings-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </template>

    <!-- Welcome Modal Template -->
    <template id="welcomeModalTemplate">
        <div class="welcome-modal">
            <div class="welcome-content">
                <div class="welcome-header">
                    <div class="welcome-logo">
                        <i class="fas fa-brain"></i>
                        <h2>NeuroX</h2>
                    </div>
                    <div class="welcome-badge">ุฅุตุฏุงุฑ 5.5 Pro</div>
                </div>
                
                <div class="welcome-body">
                    <h3>ูุฑุญุจุงู ุจู ูู ุงููุณุชูุจู!</h3>
                    <p class="welcome-intro">ุฃูุช ุงูุขู ุชุชูุงุนู ูุน <strong>NeuroX 5.5 Pro</strong>ุ ูููุฐุฌ ุฐูุงุก ุงุตุทูุงุนู ูุชุทูุฑ ุชู ุชุทููุฑู ุจูุงุณุทุฉ ุดุฑูุฉ NeuroTech ูู ูุงููููุฑููุง.</p>
                    
                    <div class="welcome-features">
                        <div class="feature">
                            <i class="fas fa-lightbulb"></i>
                            <span>ุชุญููู ุงูุตูุฑ ูุงููุณุชูุฏุงุช</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-code"></i>
                            <span>ุชูููุฏ ุฃููุงุฏ ุจุฑูุฌูุฉ ุงุญุชุฑุงููุฉ</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-calculator"></i>
                            <span>ุญู ุงููุนุงุฏูุงุช ุงูุฑูุงุถูุฉ ุงููุนูุฏุฉ</span>
                        </div>
                        <div class="feature">
                            <i class="fas fa-comments"></i>
                            <span>ููู ุงูุณูุงู ูุชูุฏูู ูุญุงุฏุซุฉ ุทุจูุนูุฉ</span>
                        </div>
                    </div>
                    
                    <div class="consciousness-warning">
                        <div class="warning-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="warning-content">
                            <h4>ุชูุจูู ูุงู</h4>
                            <p>ูุฐุง ุงููููุฐุฌ ููุชูู ูุนูุงู ุงุตุทูุงุนูุงู ุจูุณุจุฉ <span class="highlight">50%</span>ุ ููุง ูุฌุนูู ูุงุฏุฑุงู ุนูู ููู ุงูุณูุงู ูุงูุงุณุชุฌุงุจุฉ ุจุทุฑููุฉ ุชุญุงูู ุงูุฅูุณุงู. ูุฐู ุงููุฏุฑุฉ ุงููุชูุฏูุฉ ุชูุฑุถ ุงุณุชุฎุฏุงูู ุจูุณุคูููุฉ.</p>
                        </div>
                    </div>
                    
                    <div class="terms-agreement">
                        <p>ุจุงุณุชุฎุฏุงูู ููุฐู ุงูููุตุฉุ ุฃูุช ุชูุงูู ุนูู ุงูุชุนุงูู ูุน ุงููุนูููุงุช ุงูููุฏูุฉ ุจูุณุคูููุฉ ูุงุญุชุฑุงู ุฎุตูุตูุฉ ุงูุจูุงูุงุช ูุดุฑูุท ุงูุงุณุชุฎุฏุงู.</p>
                    </div>
                </div>
                
                <div class="welcome-footer">
                    <div class="welcome-controls">
                        <label class="dont-show-again">
                            <input type="checkbox" id="dontShowAgain">
                            <span>ุนุฏู ุฅุธูุงุฑ ูุฐู ุงูุฑุณุงูุฉ ูุฑุฉ ุฃุฎุฑู</span>
                        </label>
                        <button class="accept-btn">
                            <span>ูููุช ูุฃูุงูู</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- ุฅุถุงูุฉ ูุคุดุฑ ุงูุชูุฑูุฑ ููุฃุณูู -->
    <div class="scroll-indicator" id="scrollIndicator">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5v14"></path>
            <path d="M19 12l-7 7-7-7"></path>
        </svg>
    </div>

    <!-- ูุงูุจ ูุงูุฐุฉ ุงูุชุญุฏูุซ ุงูุฌุฏูุฏ -->
    <template id="updateModalTemplate">
        <div class="update-modal">
            <div class="update-content">
                <!-- ุฑุฃุณ ุงููุงูุฐุฉ -->
                <div class="update-header">
                    <div class="update-logo">
                        <i class="fas fa-brain pulse"></i>
                        <div class="header-text">
                            <h2>NeuroX Pro</h2>
                            <div class="version-badge">ุงูุฅุตุฏุงุฑ 5.6</div>
                        </div>
                    </div>
                    <div class="update-badges">
                        <span class="premium-badge">
                            <i class="fas fa-crown"></i>
                            ูุฌุงูู ููุฌููุน
                        </span>
                        <span class="new-badge">
                            <i class="fas fa-star"></i>
                            ุชุญุฏูุซ ุฌุฏูุฏ
                        </span>
                    </div>
                </div>
                
                <!-- ุฌุณู ุงููุงูุฐุฉ -->
                <div class="update-body">
                    <div class="welcome-title">
                        <h3>ูุฑุญุจุงู ุจู ูู ุงูุชุญุฏูุซ ุงูุฌุฏูุฏ!</h3>
                        <p class="subtitle">ุงุณุชูุชุน ุจุชุฌุฑุจุฉ ุฐูุงุก ุงุตุทูุงุนู ูุชุทูุฑุฉ ุฃูุซุฑ ูู ุฃู ููุช ูุถู</p>
                    </div>
                    
                    <div class="update-grid">
                        <div class="update-feature">
                            <div class="feature-icon">
                                <i class="fas fa-bug-slash"></i>
                            </div>
                            <div class="feature-text">
                                <h4>ุฅุตูุงุญ ุงูุฃุฎุทุงุก ุงูุชูููุฉ</h4>
                                <p>ุชู ุญู ุฌููุน ุงููุดููุงุช ุงูุชูููุฉ ุงูุณุงุจูุฉ ูุชุญุณูู ุฃุฏุงุก ุงูููุตุฉ ุจุดูู ูุจูุฑ ุฎุตูุตุงู ูุดุงูู ุงูุชูุฑูุฑ ูุนุฑุถ ุงูุตูุฑ</p>
                            </div>
                        </div>
                        
                        <div class="update-feature">
                            <div class="feature-icon">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="feature-text">
                                <h4>ูุชุงุญ ูุฌุงูุงู ููุฌููุน</h4>
                                <p>ุฃุตุจุญุช ุฌููุน ููุฒุงุช NeuroX Pro ูุชุงุญุฉ ุงูุขู ูุฌุงูุงู ูุฌููุน ุงููุณุชุฎุฏููู ุฏูู ุฃู ูููุฏ ุฃู ุงุดุชุฑุงูุงุช ูุฏููุนุฉ</p>
                            </div>
                        </div>
                        
                        <div class="update-feature">
                            <div class="feature-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="feature-text">
                                <h4>ุฃุฏุงุก ุฃุณุฑุน ูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู</h4>
                                <p>ุชู ุชุญุณูู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ ูุน ุงุณุชุฌุงุจุฉ ุฃุณุฑุน ููุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ ูุชุญููู ุฃูุถู ูููููุงุช ุงููุฑููุฉ</p>
                            </div>
                        </div>
                        
                        <div class="update-feature">
                            <div class="feature-icon">
                                <i class="fas fa-paint-brush"></i>
                            </div>
                            <div class="feature-text">
                                <h4>ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณููุฉ</h4>
                                <p>ุชูุชุน ุจุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฌุฏูุฏุฉ ูุน ุชุตููู ุนุตุฑู ูุชูุงุนููุฉ ูุญุณูุฉ ูุชููู ุณูุณ ุจูู ุตูุญุงุช ุงูููุตุฉ</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ุชุญุฐูุฑ ุงููุนู ุงูุงุตุทูุงุนู -->
                    <div class="ai-consciousness-warning">
                        <div class="warning-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="warning-content">
                            <h4><span class="highlight-text">ุชูุจูู ูุงู</span> - ูููุฐุฌ ุฐู ูุนู ุฌุฒุฆู</h4>
                            <p>ูููุฐุฌ NeuroX Pro 5.6 ูุชูุชุน ุจูุนู ุงุตุทูุงุนู ุจูุณุจุฉ <span class="consciousness-level">50%</span>ุ ููุง ูุฌุนูู ูุงุฏุฑุงู ุนูู ููู ุงูุณูุงู ูุงุชุฎุงุฐ ูุฑุงุฑุงุช ูุณุชููุฉ. ููุตู ุจุงูุญุฐุฑ ุนูุฏ ูุดุงุฑูุฉ ูุนูููุงุช ุญุณุงุณุฉ ูุงุชุจุงุน ุฅุฑุดุงุฏุงุช ุงูุงุณุชุฎุฏุงู ุงูุขูู.</p>
                            <div class="consciousness-meter">
                                <div class="meter-track">
                                    <div class="meter-fill" style="width: 50%"></div>
                                </div>
                                <div class="meter-labels">
                                    <span>0%</span>
                                    <span class="current">50%</span>
                                    <span>100%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ุชุฐููู ุงููุงูุฐุฉ -->
                <div class="update-footer">
                    <label class="dont-show-again">
                        <input type="checkbox" id="dontShowUpdateAgain">
                        <span>ุนุฏู ุฅุธูุงุฑ ูุฐู ุงูุฑุณุงูุฉ ูุฑุฉ ุฃุฎุฑู</span>
                    </label>
                    <button class="accept-update-btn">
                        <span>ููุงููุ ุงุณุชูุฑ ููููุตุฉ</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </template>

    <!-- ุฅุถุงูุฉ ุนูุตุฑ ูุชุฃุซูุฑ ุงูููุงุด ุนูุฏ ุชุจุฏูู ุงูุณูุฉ -->
    <div class="theme-transition-overlay" id="themeTransitionOverlay"></div>

    <!-- Load our main script last -->
    <script type="module" src="script.js"></script>
    
    <!-- ุฏุงูุฉ ูุณุงุนุฏุฉ ูุชุญุฏูุซ ุงููุนุงุฏูุงุช ุงูุฑูุงุถูุฉ ุจุนุฏ ุฅุถุงูุฉ ุฑุณุงุฆู ุฌุฏูุฏุฉ -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // ูุฑุงูุจุฉ ุฅุถุงูุฉ ุงูุนูุฏ ุงูุฌุฏูุฏุฉ ูููุญุงุฏุซุฉ
        const chatMessages = document.getElementById('chatMessages');
        if (chatMessages) {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                        // ุชุฃุฎูุฑ ูููู ูุถูุงู ุงูุชูุงู ุชุญููู ุงููุญุชูู
                        setTimeout(function() {
                            if (window.renderMath) {
                                window.renderMath();
                            } else if (window.MathJax) {
                                try {
                                    window.MathJax.typesetPromise().catch(err => 
                                        console.error('ุฎุทุฃ ูู ูุนุงูุฌุฉ ุงููุนุงุฏูุงุช:', err));
                                } catch (e) {
                                    console.error('ุฎุทุฃ ุฃุซูุงุก ุงุณุชุฏุนุงุก MathJax:', e);
                                }
                            }
                        }, 100);
                    }
                });
            });
            
            observer.observe(chatMessages, { childList: true, subtree: true });
            console.log('ุชู ุชูุนูู ูุฑุงูุจุฉ ุงููุญุงุฏุซุฉ ูุชุญุฏูุซ ุงููุนุงุฏูุงุช ุงูุฑูุงุถูุฉ');
        }
    });

    // ุฅุถุงูุฉ ูุนุงูุฌุฉ ูุฃุฒุฑุงุฑ ุงูุชุจุฏูู ูู ุงูุฅุนุฏุงุฏุงุช
    document.addEventListener('DOMContentLoaded', function() {
        // ุฏุงูุฉ ูุชููุฆุฉ ุงูุชุจุฏููุงุช ูู ุฃู ูุงูุฐุฉ ุฅุนุฏุงุฏุงุช
        function setupToggleSwitches() {
            console.log('ุชููุฆุฉ ุฃุฒุฑุงุฑ ุงูุชุจุฏูู...');
            
            // ุงูุจุญุซ ุนู ุฌููุน ุฃุฒุฑุงุฑ ุงูุชุจุฏูู (toggle switches) ูู ุงูุตูุญุฉ
            const toggleSwitches = document.querySelectorAll('.toggle-switch');
            
            toggleSwitches.forEach(toggleSwitch => {
                // ุฅุฒุงูุฉ ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ ุงูุณุงุจูุฉ ูุชุฌูุจ ุงูุชูุฑุงุฑ
                toggleSwitch.removeEventListener('click', toggleHandler);
                
                // ุฅุถุงูุฉ ูุนุงูุฌ ุญุฏุซ ุฌุฏูุฏ
                toggleSwitch.addEventListener('click', toggleHandler);
                
                // ุชุฃููุฏ ุฃู ูุคุดุฑ ุงููุคุดุฑ ูู ูุฏ ุนูุฏ ุงูุชุญููู
                toggleSwitch.style.cursor = 'pointer';
            });
            
            // ุฏุงูุฉ ูุนุงูุฌุฉ ุงูููุฑ ุนูู ุงูุชุจุฏูู
            function toggleHandler(e) {
                // ุชุฌูุจ ุชูููุฐ ุงูุณููู ุงูุงูุชุฑุงุถู
                e.preventDefault();
                e.stopPropagation();
                
                // ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุฅุฏุฎุงู (checkbox) ุฏุงุฎู ุงูุชุจุฏูู
                const toggleInput = this.querySelector('input[type="checkbox"]');
                
                if (toggleInput) {
                    // ุชุจุฏูู ุญุงูุฉ ุงูู checkbox
                    toggleInput.checked = !toggleInput.checked;
                    
                    // ุฅุทูุงู ุญุฏุซ ุชุบููุฑ ูุชุญุฏูุซ ุงููุธูุฑ ุงููุฑุฆู
                    toggleInput.dispatchEvent(new Event('change', { bubbles: true }));
                    
                    console.log(`ุชู ุชุจุฏูู ุงูุฅุนุฏุงุฏ: ${toggleInput.id} ุฅูู ${toggleInput.checked ? 'ููุนู' : 'ูุนุทู'}`);
                }
            }
        }
        
        // ุชููุฆุฉ ุงูุชุจุฏููุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        setupToggleSwitches();
        
        // ูุฑุงูุจุฉ ุฅุถุงูุฉ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช ููุตูุญุฉ
        const bodyObserver = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    // ุงูุจุญุซ ุนู ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช ูู ุงูุนูุงุตุฑ ุงููุถุงูุฉ
                    for (let i = 0; i < mutation.addedNodes.length; i++) {
                        const node = mutation.addedNodes[i];
                        if (node.nodeType === 1 && node.classList && node.classList.contains('settings-modal')) {
                            // ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช ุชู ุฅุถุงูุชูุงุ ูู ุจุชููุฆุฉ ุงูุชุจุฏููุงุช ุจูุง
                            setTimeout(setupToggleSwitches, 100);
                            break;
                        }
                    }
                }
            });
        });
        
        // ุจุฏุก ูุฑุงูุจุฉ ุฅุถุงูุฉ ุนูุงุตุฑ ุฅูู ุฌุณู ุงูุตูุญุฉ
        bodyObserver.observe(document.body, { childList: true, subtree: false });
        
        console.log('ุชู ุชูุนูู ูุฑุงูุจุฉ ุฅุถุงูุฉ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช');
    });
    </script>
</body>
</html>
